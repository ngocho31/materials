\documentclass[12pt,a4paper,oneside]{book} % twoside for draf

\usepackage{mathptmx}
\usepackage{bkthesis}
\usepackage{lstautogobble}

\usepackage{caption}
\usepackage{newfloat}
\usepackage[framemethod=TikZ]{mdframed}
\usepackage{fancyvrb}
\usepackage{fvextra}

% Force straight quotes
\usepackage{csquotes}
\DeclareQuoteStyle{straight}
  {\textquotedbl}{\textquotedbl}
  {\textquoteright}{\textquoteright}
\setquotestyle{straight}

% Custom commands

\lstset{
  frame=tb,
  language=python,
  basicstyle=\ttfamily\footnotesize,
  numbers=left,
  numberstyle=\footnotesize,
  frame=single, % Adds a frame around the code
  rulecolor=\color{black},
  aboveskip=3mm,
  belowskip=3mm,
  breaklines=true, % Automatically break long lines
  showstringspaces=false,
  columns=flexible,
  breakatwhitespace=true,
  tabsize=4
}

% Multi-line command environments ---------------------------------------------

\lstnewenvironment{terminal}{\lstset{
  autogobble,
  language=[LaTeX]TeX,
  escapechar={\%},
  columns=fullflexible,
  breakautoindent=false,
  alsoletter={()[].=:-},
  breakindent=0pt,
  numbers=none,
  prebreak=\textbackslash,
  keepspaces=true
}}{}

\DeclareFloatingEnvironment[fileext=text,placement={!ht},name=Text]{textboxenv}
\makeatletter
\@ifundefined{caption@textboxenv}{}{%
  \captionsetup[textboxenv]{list=false,skip=2pt}%
}
\makeatother

\newmdenv[
  topline=true, bottomline=true,
  rightline=true, leftline=true,
  innerleftmargin=4pt,
  innerrightmargin=4pt,
  innertopmargin=4pt,
  innerbottommargin=4pt,
  linewidth=1pt,
  roundcorner=0pt
]{textframe}

% textbox[<label>]{<caption>}
\NewDocumentEnvironment{textbox}{O{} m}{%
  \begin{textboxenv}
  \caption{#2}
  \IfValueT{#1}{\label{#1}}
  \begin{textframe}
  \footnotesize
}{%
  \end{textframe}
  \end{textboxenv}
}

% others... ------------------------------------------------------------------

\setcounter{secnumdepth}{2}

\thesislayout
%-	Bìa cứng - màu xanh dương, chữ mạ vàng (xem mẫu đính kèm)
%-	Trang tên (tờ lót): chất liệu giấy, nội dung giống như bìa LV
%-	Ở gáy LV: in nhan đề LV (có thể in tóm tắt nếu nhan đề quá dài), size 15 – 17
%-	Phiếu Nhiệm vụ LV, chấm điểm Hướng dẫn & Phản biện (đã ký): nhận từ GVHD & GVPB sau khi bảo vệ (theo lịch hẹn).
%-	Lời cam đoan
%-	Lời cảm ơn/ Lời ngỏ
%-	Tóm tắt LV
%-	Mục lục
%-	Danh mục, bảng biểu, hình ảnh, ... (nếu có)
%-	Nội dung LV
%-	Danh mục TL tham khảo
%-	Phụ lục (nếu có)

\begin{document}
